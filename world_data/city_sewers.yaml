ZONES:
  city_sewers:
    name: City Sewers
    description: The dank and filthy sewers of the imperial city. The stench is unbearable.
    rooms:
      sewer_entrance:
        name: Sewer Entrance
        description: >
          You stand at the entrance to the Imperial City's vast sewer system. A large, 
          circular stone archway looms before you, its edges slick with moisture and 
          adorned with moss. The pungent odor of waste and stagnant water assaults your 
          nostrils. Flickering torches mounted on the walls cast eerie shadows, revealing 
          glimpses of the dank passageways that stretch into the darkness below. 
          Occasional echoes of dripping water and scurrying creatures reach your ears, 
          hinting at the challenges that await in the depths.

          Exits: down, out
        exits:
          down:
            destination: main_junction
          out:
            destination: imperial_city.sewers_entrance
        triggers:
          - id: timer_tick_sewer_entrance_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo A gust of foul air wafts up from the depths, carrying the unmistakable stench of the sewers.
          - id: timer_tick_sewer_entrance_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo The distant sound of rushing water echoes from deep within the sewer system.
          - id: catch_look_torch
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "torch"
            script: |
              echo The torch flickers weakly, its flame struggling against the damp air of the sewers.
          - id: catch_any_smell
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "smell"
            script: |
              echo You instantly regret trying to smell anything here. The stench is overwhelming.
          - id: catch_say_hello
            type: catch_say
            criteria:
              - subject: "%{*}"
                operator: contains
                predicate: "hello"
            script: |
              echo Your voice echoes ominously through the sewer entrance, but only silence answers back.
        creatures:
          - id: giant_rat
            quantity: 2
            respawn_time_min: 20
            respawn_time_max: 60
          - id: giant_roach
            quantity: 1
            respawn_time_min: 30
            respawn_time_max: 90
          - id: giant_leech
            quantity: 1
            respawn_time_min: 45
            respawn_time_max: 120
      
      main_junction:
        name: Main Sewer Junction
        description: >
          You find yourself in a vast, circular chamber that serves as the main junction 
          for the Imperial City's sewer system. Massive stone pillars, slick with moisture 
          and adorned with patches of phosphorescent fungi, support the vaulted ceiling 
          high above. Multiple tunnels branch out in all directions, their dark mouths 
          gaping like hungry beasts. The air is thick with the stench of decay and the 
          constant sound of rushing water. Channels of murky, foul-smelling liquid 
          converge in the center of the room, forming a swirling whirlpool that 
          disappears into an ominous drain.

          Exits: up, north, south, east, west
        exits:
          up:
            destination: sewer_entrance
          north:
            destination: northern_tunnel
          south:
            destination: southern_tunnel
          east:
            destination: eastern_tunnel
          west:
            destination: western_tunnel
        triggers:
          - id: timer_tick_main_junction_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo The sound of rushing water grows momentarily louder, echoing off the chamber walls.
          - id: timer_tick_main_junction_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo A piece of unidentifiable debris floats by in one of the water channels, quickly disappearing into the central whirlpool.
          - id: catch_look_fungi
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "fungi"
            script: |
              echo The phosphorescent fungi glow with an eerie, pale blue light, providing just enough illumination to navigate the chamber.
          - id: catch_any_sewer_swim
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "swim"
            script: |
              echo Swimming in these foul waters would be extremely unwise and potentially deadly.
          - id: catch_say_sewer_echo
            type: catch_say
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "echo"
            script: |
              $if($random(1,2),eq,1) {
                echo Your words echo back at you, distorted and haunting in the vast chamber.
              } else {
                echo The echoes of your voice seem to awaken something in the shadows. You hear a distant skittering sound.
              }
        creatures:
          - id: giant_rat
            quantity: 3
            respawn_time_min: 15
            respawn_time_max: 45
          - id: slime
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: giant_leech
            quantity: 1
            respawn_time_min: 45
            respawn_time_max: 120
      
      northern_tunnel:
        name: Northern Sewer Tunnel
        description: >
          You find yourself in a long, arched tunnel stretching northward into the gloom. 
          The walls, made of ancient stonework, are slick with moisture and patches of 
          slimy growth. Brackish water flows sluggishly through a central channel, carrying 
          with it an assortment of refuse and detritus. Rusty iron brackets hold sputtering 
          torches at irregular intervals, casting flickering shadows that dance across the 
          curved ceiling. The air is thick with the musty odor of decay and stagnant water. 
          Occasionally, you hear the distant splash of unseen creatures moving through the 
          murky depths.

          Exits: south, north
        exits:
          south:
            destination: main_junction
          north:
            destination: waste_processing_chamber
        triggers:
          - id: timer_tick_northern_tunnel_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 18
            script: |
              echo A cold draft whistles through the tunnel, carrying with it the echoes of distant dripping water.
          - id: timer_tick_northern_tunnel_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 25
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo Something large splashes in the water channel, momentarily disturbing the sluggish flow.
          - id: catch_look_torch
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "torch"
            script: |
              echo The torch flickers weakly, its flame struggling against the damp air. The rusted bracket holding it looks ready to give way at any moment.
          - id: catch_any_sewer_drink
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "drink"
            script: |
              echo The very thought of drinking this foul water turns your stomach. It would be extremely unwise and potentially deadly.
          - id: catch_say_hello
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "hello"
            script: |
              echo Your greeting echoes down the tunnel, fading into an eerie silence. Then, from somewhere in the darkness, you hear what sounds like a faint, mocking echo of your voice.
        creatures:
          - id: giant_rat
            quantity: 2
            respawn_time_min: 20
            respawn_time_max: 60
          - id: giant_leech
            quantity: 1
            respawn_time_min: 40
            respawn_time_max: 100
          - id: slime
            quantity: 1
            respawn_time_min: 30
            respawn_time_max: 90

      waste_processing_chamber:
        name: Waste Processing Chamber
        description: >
          You enter a large, circular chamber that serves as a primitive waste processing 
          area for the Imperial City's sewage system. The air is thick with noxious fumes 
          and the unmistakable stench of decay. Massive stone grinders, powered by an 
          unseen water wheel, churn slowly in the center of the room, breaking down solid 
          waste. Channels of murky water feed into and out of the chamber through grated 
          openings. The walls are lined with crude stone shelves holding an assortment of 
          alchemical mixtures in clay jars - presumably used to treat the waste. Sputtering 
          torches cast an eerie, green-tinged light, reflecting off the slime-coated surfaces. 
          The constant grinding noise and gurgling of water creates a cacophony that echoes 
          throughout the chamber.

          Exits: south, east, west
        exits:
          south:
            destination: northern_tunnel
          east:
            destination: filtration_room
          west:
            destination: sludge_pit
        triggers:
          - id: timer_tick_waste_processing_chamber_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo The grinding stones emit a loud groan as they crush a particularly large piece of debris.
          - id: timer_tick_waste_processing_chamber_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo A burst of foul gas erupts from one of the water channels, causing you to gag momentarily.
          - id: catch_look_jar
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "jar"
            script: |
              echo The clay jars are labeled with crude symbols. You recognize some as basic alchemical notations for acids and bases.
          - id: catch_any_sewer_touch
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "touch"
            script: |
              echo You think better of touching anything in this foul chamber. Who knows what diseases lurk in the waste?
          - id: catch_say_help
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "help"
            script: |
              echo Your cry for help is drowned out by the grinding of stones and rushing of water. If anyone heard you, they gave no sign.
        creatures:
          - id: giant_rat
            quantity: 3
            respawn_time_min: 15
            respawn_time_max: 45
          - id: slime
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: giant_leech
            quantity: 1
            respawn_time_min: 45
            respawn_time_max: 120

      filtration_room:
        name: Filtration Room
        description: >
          You enter a long, rectangular chamber that appears to be a crude attempt at 
          water filtration. The room is dominated by a series of large, tiered stone 
          basins filled with layers of sand, gravel, and charcoal. Murky water trickles 
          down from one basin to the next, gradually becoming clearer, though still far 
          from pure. The walls are lined with racks of clay pots containing various 
          mineral salts and powders used in the filtration process. The air is thick 
          with humidity and the pungent smell of algae and mineral deposits. Guttering 
          torches cast a wavering light, revealing patches of bioluminescent mold growing 
          in the darker corners. The constant sound of trickling water echoes off the 
          stone walls, occasionally punctuated by the drip of water from the vaulted ceiling.

          Exits: west, down
        exits:
          west:
            destination: waste_processing_chamber
          down:
            destination: underground_stream
        triggers:
          - id: timer_tick_filtration_room_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo A large bubble rises to the surface of one of the basins and bursts, releasing a brief whiff of sulfur.
          - id: timer_tick_filtration_room_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo You hear a muffled splash from the underground stream below, followed by an unsettling gurgling sound.
          - id: catch_look_basin
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "basin"
            script: |
              echo As you peer into the basin, you notice small, pale creatures darting between the layers of filtration material.
          - id: catch_any_sewer_drink
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "drink"
            script: |
              echo Despite the filtration process, this water is still far from safe to drink. The thought alone makes your stomach churn.
          - id: catch_say_hello
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "hello"
            script: |
              echo Your voice echoes strangely in the humid air, distorted by the constant sound of trickling water.
        creatures:
          - id: giant_frog
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: slime
            quantity: 1
            respawn_time_min: 40
            respawn_time_max: 100
          - id: giant_leech
            quantity: 1
            respawn_time_min: 50
            respawn_time_max: 120

      sludge_pit:
        name: Sludge Pit
        description: >
          You find yourself at the edge of a vast, circular pit filled with a thick, 
          bubbling morass of sludge and waste. The stench here is overwhelming, a miasma 
          of decay and noxious gases that burns your nostrils and makes your eyes water. 
          The walls of the pit are slick with a greenish-black slime, and narrow walkways 
          of ancient stone circle the edge, their surfaces treacherously slippery. 
          Occasional geysers of gas erupt from the sludge, releasing clouds of foul vapor. 
          Dim, sickly green light emanates from patches of bioluminescent fungi clinging 
          to the walls, casting eerie shadows across the roiling surface of the pit. The 
          constant gurgle and squelch of the sludge creates a nauseating backdrop of sound.

          Exits: east, down
        exits:
          east:
            destination: waste_processing_chamber
          down:
            destination: muck_cavern
        triggers:
          - id: timer_tick_sludge_pit_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo A large bubble swells on the surface of the sludge before bursting with a sickening 'plop', releasing a cloud of foul gas.
          - id: timer_tick_sludge_pit_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 25
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo Something large and unseen moves beneath the surface of the sludge, creating a series of ripples that lap at the edges of the pit.
          - id: catch_look_fungi
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "fungi"
            script: |
              echo The bioluminescent fungi pulsate slowly, their eerie green light seeming to throb in time with the bubbling of the sludge.
          - id: catch_any_jump
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "jump"
            script: |
              echo The thought of jumping into the sludge pit fills you with dread. It would surely mean a quick and unpleasant death.
          - id: catch_say_help
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "help"
            script: |
              echo Your cry for help is swallowed by the gurgling of the sludge. If anything heard you, it's probably not something you'd want to come to your aid.
        creatures:
          - id: giant_leech
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: slime
            quantity: 3
            respawn_time_min: 20
            respawn_time_max: 60
          - id: giant_frog
            quantity: 1
            respawn_time_min: 45
            respawn_time_max: 120
            
      underground_stream:
        name: Underground Stream
        description: >
          You find yourself in a long, winding cavern carved out by an underground stream. 
          The air here is cooler and less fetid than in the upper sewers, with a damp, 
          earthy smell. The stream, surprisingly clear compared to the foul waters above, 
          rushes along a deep channel cut into the cavern floor. Worn stone paths line 
          both sides of the stream, their surfaces slick with moisture. The walls of the 
          cavern glitter with tiny crystals and veins of mineral deposits, catching and 
          reflecting the light from your torch. Patches of luminescent moss add a soft, 
          blue-green glow to the darker recesses. The constant sound of rushing water 
          echoes off the stone walls, occasionally punctuated by the splash of unseen 
          creatures in the stream.

          Exits: up, east
        exits:
          up:
            destination: filtration_room
          east:
            destination: waterfall_chamber
        triggers:
          - id: timer_tick_underground_stream_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo A school of pale, eyeless fish suddenly darts past in the stream, their scales glinting in the dim light.
          - id: timer_tick_underground_stream_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo A cool breeze wafts through the cavern, carrying with it the distant sound of falling water.
          - id: catch_look_crystal
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "crystal"
            script: |
              echo As you examine the crystals more closely, you notice they seem to pulse faintly with an inner light.
          - id: catch_any_sewer_drink
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "drink"
            script: |
              echo While the water looks clearer here, drinking from an unknown underground source could still be dangerous.
          - id: catch_say_hello
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "hello"
            script: |
              echo Your voice echoes off the cavern walls, mixing with the sound of rushing water in an eerie chorus.
        creatures:
          - id: giant_frog
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: giant_leech
            quantity: 1
            respawn_time_min: 45
            respawn_time_max: 120
          - id: giant_crayfish
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 150

      muck_cavern:
        name: Muck-Filled Cavern
        description: >
          You stand at the edge of a vast, natural cavern that has become a repository for 
          the city's foulest waste. The floor is a treacherous expanse of deep, sticky muck 
          that bubbles and shifts ominously. Tendrils of noxious vapor rise from the surface, 
          creating a hazy, sickly atmosphere. The cavern walls, barely visible through the 
          miasma, are coated with a slick, iridescent film that glistens in the dim light. 
          Sparse patches of sickly, mutated fungi cling to the higher portions of the walls, 
          providing meager illumination with their pale, unhealthy glow. The air is thick 
          with the overpowering stench of decay and the muffled sounds of things moving 
          beneath the muck's surface.

          Exits: up, east
        exits:
          up:
            destination: sludge_pit
          east:
            destination: fungal_grove
        triggers:
          - id: timer_tick_muck_cavern_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo A large bubble swells and bursts in the muck, releasing a cloud of foul gas that momentarily thickens the air.
          - id: timer_tick_muck_cavern_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 25
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo Something large and unseen moves beneath the surface of the muck, creating ripples that spread across the cavern floor.
          - id: catch_look_fungi
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "fungi"
            script: |
              echo The mutated fungi seem to recoil as you look at them, their sickly glow flickering erratically.
          - id: catch_any_sewer_swim
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "swim"
            script: |
              echo The very thought of swimming in this muck fills you with revulsion. It would be incredibly dangerous and likely fatal.
          - id: catch_say_help
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "help"
            script: |
              echo Your cry for help is muffled by the thick, foul air. Only the burbling muck seems to answer, mockingly.
        creatures:
          - id: giant_leech
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: slime
            quantity: 3
            respawn_time_min: 20
            respawn_time_max: 60
          - id: muck_beast
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180

      waterfall_chamber:
        name: Sewer Waterfall Chamber
        description: >
          You enter a massive, cathedral-like cavern dominated by a thundering waterfall. 
          The water, a mix of the clearer underground stream and the fouler sewage from 
          above, cascades down a jagged rock face, creating a constant mist that fills 
          the air. The floor is a series of tiered pools, each slightly cleaner than the 
          last as the water's movement provides a natural filtration. Phosphorescent 
          algae cling to the wet walls, bathing the chamber in an eerie, blue-green glow. 
          The roar of the falling water is deafening, yet underneath you can hear the 
          gurgle of unseen underground streams. A narrow, slippery ledge hugs the wall, 
          offering precarious passage around the chamber.

          Exits: west, down
        exits:
          west:
            destination: underground_stream
          down:
            destination: whirlpool_room
        triggers:
          - id: timer_tick_waterfall_chamber_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo A sudden surge in the waterfall's flow sends a spray of mist across the chamber, momentarily obscuring your vision.
          - id: timer_tick_waterfall_chamber_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo You glimpse a large, pale fish leaping up the tiered pools, struggling against the current.
          - id: catch_look_algae
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "algae"
            script: |
              echo As you examine the phosphorescent algae, its glow intensifies, creating mesmerizing patterns on the wet stone.
          - id: catch_any_sewer_swim
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "swim"
            script: |
              echo Swimming here would be extremely dangerous. The current looks strong enough to sweep you over the edge to the chambers below.
          - id: catch_say_sewer_echo
            type: catch_say
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "echo"
            script: |
              $if($random(1,2),eq,1) {
                echo You shout, but your voice is completely drowned out by the roar of the waterfall.
              } else {
                echo Your voice echoes strangely, seeming to come from all directions at once before fading into the waterfall's roar.
              }
        creatures:
          - id: giant_frog
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: cave_fish
            quantity: 3
            respawn_time_min: 20
            respawn_time_max: 60
          - id: water_elemental
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180

      fungal_grove:
        name: Bioluminescent Fungal Grove
        description: >
          You step into a surreal underground chamber that seems to pulse with alien life. 
          The entire cavern is filled with an enormous variety of bioluminescent fungi, 
          creating a magical landscape of soft, otherworldly light. Massive mushrooms tower 
          overhead, their caps glowing in hues of blue, green, and purple. Delicate, 
          lace-like mycelium networks cover the walls, pulsing with gentle waves of 
          phosphorescence. The floor is a carpet of smaller fungi, their light shifting 
          subtly beneath your feet. The air is thick with spores, creating a misty 
          atmosphere that dances with tiny, glowing particles. A constant, barely audible 
          hum seems to emanate from the fungi themselves, creating an eerie background noise.

          Exits: west, south
        exits:
          west:
            destination: muck_cavern
          south:
            destination: rat_nest
        triggers:
          - id: timer_tick_fungal_grove_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo A cluster of nearby fungi suddenly brightens, releasing a small cloud of glowing spores that drift lazily through the air.
          - id: timer_tick_fungal_grove_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 25
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo You hear a soft rustling sound, and notice that some of the fungi seem to be slowly moving, their stalks bending and swaying.
          - id: catch_look_mushroom
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "mushroom"
            script: |
              echo As you examine the mushroom more closely, you notice intricate patterns on its surface that seem to shift and change as you watch.
          - id: catch_any_eat
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "eat"
            script: |
              echo The idea of eating any of these strange fungi seems extremely unwise. There's no telling what effects they might have.
          - id: catch_say_hello
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "hello"
            script: |
              echo As you speak, the fungi around you seem to react, their glow intensifying briefly before fading back to normal.
        creatures:
          - id: giant_slug
            quantity: 2
            respawn_time_min: 40
            respawn_time_max: 100
          - id: spore_creature
            quantity: 3
            respawn_time_min: 30
            respawn_time_max: 90
          - id: fungal_shambler
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180

      whirlpool_room:
        name: Whirlpool Room
        description: >
          You enter a circular chamber dominated by a massive, swirling whirlpool at its center. 
          The room's walls are smooth, worn by centuries of rushing water. The deafening roar 
          of the vortex fills the air, punctuated by the occasional sound of debris being 
          sucked into its depths. A narrow, slippery ledge hugs the outer wall, offering a 
          treacherous path around the room. Phosphorescent algae cling to the wet stones, 
          casting an eerie, wavering light that dances with the motion of the water. Mist 
          hangs heavy in the air, and occasional sprays from the whirlpool keep everything 
          perpetually damp. The sheer power of the swirling waters creates a palpable sense 
          of danger.

          Exits: up, east
        exits:
          up:
            destination: waterfall_chamber
          east:
            destination: flooded_corridor
        triggers:
          - id: timer_tick_whirlpool_room_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 18
            script: |
              echo The whirlpool suddenly intensifies, its roar growing louder as it sucks down a large piece of debris.
          - id: timer_tick_whirlpool_room_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo A powerful surge of water splashes over the ledge, making the footing even more treacherous.
          - id: catch_look_whirlpool
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "whirlpool"
            script: |
              echo As you gaze into the swirling vortex, you feel a momentary vertigo, as if the whirlpool might pull you in at any moment.
          - id: catch_any_sewer_swim
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "swim"
            script: |
              echo Swimming here would be certain death. The power of the whirlpool would suck you in instantly.
          - id: catch_say_help
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "help"
            script: |
              echo Your cry for help is completely drowned out by the roar of the whirlpool. You doubt anyone could hear you over this din.
        creatures:
          - id: water_elemental
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180
          - id: giant_crab
            quantity: 2
            respawn_time_min: 45
            respawn_time_max: 120
          - id: vortex_spirit
            quantity: 1
            respawn_time_min: 90
            respawn_time_max: 240

      rat_nest:
        name: Giant Rat Nest
        description: >
          You've stumbled into a vast chamber that serves as a breeding ground for the sewer's 
          giant rat population. The air is thick with the musky odor of rodents and the 
          sickly-sweet smell of decay. The floor is covered in a layer of gnawed bones, 
          discarded refuse, and rat droppings. Countless tunnels and burrows riddle the 
          walls, their dark openings seeming to watch you like hundreds of eyes. Tattered 
          remnants of clothing, bits of wood, and other scavenged items are woven into 
          massive, grotesque nests that litter the chamber. The constant sound of squeaking, 
          scratching, and scurrying echoes throughout the space, occasionally punctuated by 
          vicious-sounding fights over territory or food.

          Exits: north, east
        exits:
          north:
            destination: fungal_grove
          east:
            destination: crumbling_passage
        triggers:
          - id: timer_tick_rat_nest_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo A chorus of angry squeaks erupts from one of the nests as rats fight over a piece of moldy food.
          - id: timer_tick_rat_nest_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 25
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo You hear a loud gnawing sound, and watch as a rat the size of a large dog emerges from one of the tunnels, dragging a bone.
          - id: catch_look_nest
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "nest"
            script: |
              echo As you examine the nest more closely, you notice it's constructed partially from gnawed human bones. A chill runs down your spine.
          - id: catch_any_food
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "food"
            script: |
              echo The mere thought of eating anything in this filthy, disease-ridden chamber turns your stomach.
          - id: catch_say_cheese
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "cheese"
            script: |
              echo At the mention of cheese, you hear a flurry of excited squeaks, and several beady eyes turn in your direction.
        creatures:
          - id: giant_rat
            quantity: 5
            respawn_time_min: 15
            respawn_time_max: 45
          - id: rat_swarm
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: rat_king
            quantity: 1
            respawn_time_min: 120
            respawn_time_max: 360

      flooded_corridor:
        name: Flooded Corridor
        description: >
          You wade into a long, partially submerged corridor. Murky water reaches up to your 
          waist, its surface occasionally broken by unidentifiable objects floating past. 
          The stone walls, slick with algae and slime, rise high above, meeting in a vaulted 
          ceiling lost in shadows. Flickering torches, placed at irregular intervals, struggle 
          to stay lit in the damp air, casting wavering reflections on the water's surface. 
          The sound of dripping water echoes constantly, punctuated by the occasional splash 
          of something moving beneath the surface. Debris and years of accumulated filth 
          cling to the walls, marking past water levels. The air is thick with humidity and 
          the musty smell of stagnant water.

          Exits: west, east
        exits:
          west:
            destination: whirlpool_room
          east:
            destination: pump_room
        triggers:
          - id: timer_tick_flooded_corridor_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo Something large moves beneath the water, creating a wake that sloshes against the walls.
          - id: timer_tick_flooded_corridor_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo A section of the ceiling crumbles, sending debris splashing into the water around you.
          - id: catch_look_sewer_water
            type: catch_look           # Corrected indentation
            criteria:
              - subject: "%{*}"
                operator: contains
                predicate: "water"
            script: |               # Corrected indentation
              echo As you peer into the murky water, you catch glimpses of pale, eyeless fish darting in the depths.
          - id: catch_any_sewer_swim
            type: catch_any
            criteria:
              - subject: "%{*}"         # Corrected indentation
                operator: contains
                predicate: "swim"
            script: |
              echo Swimming in this foul water would be unwise. The current is stronger than it appears, and who knows what lurks beneath the surface.
          - id: catch_say_hello
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "hello"
            script: |
              echo Your voice echoes off the water's surface, creating an eerie, warbling effect that fades into the distance.
        creatures:
          - id: giant_leech
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: sewer_crocodile
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180
          - id: water_snake
            quantity: 3
            respawn_time_min: 25
            respawn_time_max: 75

      crumbling_passage:
        name: Crumbling Stone Passage
        description: >
          You find yourself in a narrow, winding passage where the very stone seems to be 
          giving way to time and decay. Ancient brickwork, once sturdy and imposing, now 
          crumbles at the slightest touch. The ceiling is worryingly low, with stalactites 
          of calcified sewage hanging precariously overhead. The floor is treacherous, 
          littered with fallen debris and slick with a constant trickle of foul water. 
          Faint shafts of light penetrate through cracks in the walls, revealing dancing 
          motes of dust and spores. The air is thick with the musty smell of aged stone 
          and the earthy scent of encroaching soil. Every few moments, you hear the 
          unsettling sound of shifting stone or falling pebbles, a reminder of the passage's 
          instability.

          Exits: west, down
        exits:
          west:
            destination: rat_nest
          down:
            destination: ancient_crypt
        triggers:
          - id: timer_tick_crumbling_passage_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo A shower of small stones and dust rains down from the ceiling, forcing you to shield your eyes.
          - id: timer_tick_crumbling_passage_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 25
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo You hear a loud crack, and a section of the wall nearby shifts slightly, sending a chill down your spine.
          - id: catch_look_crack
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "crack"
            script: |
              echo Peering into a large crack in the wall, you catch a glimpse of something moving in the darkness beyond. You quickly step back.
          - id: catch_any_sewer_touch
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "touch"
            script: |
              echo As you touch the crumbling stone, a piece breaks off in your hand, disintegrating into gritty powder.
          - id: catch_say_hello
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "hello"
            script: |
              echo Your voice echoes strangely in the confined space, seeming to trigger a series of small stone falls further down the passage.
        creatures:
          - id: cave_spider
            quantity: 3
            respawn_time_min: 25
            respawn_time_max: 75
          - id: stone_mite
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: rubble_dweller
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180

      pump_room:
        name: Ancient Pump Room
        description: >
          You enter a vast, circular chamber dominated by an enormous, ancient water pump. 
          The contraption, a marvel of medieval engineering, stands at the center of the room, 
          its massive gears and pistons creaking and groaning as they laboriously churn the 
          sewer waters. Thick, corroded pipes snake across the walls and ceiling, occasionally 
          releasing jets of steam or droplets of foul water. The stone floor is slick with 
          moisture and algae, making footing treacherous. Flickering torches cast dancing 
          shadows across the intricate machinery, glinting off pools of stagnant water. The 
          air is thick with the smell of rust, mold, and the underlying stench of sewage. 
          The constant, rhythmic thumping of the pump creates a hypnotic backdrop, punctuated 
          by the occasional clang of metal or hiss of escaping steam.

          Exits: west, south
        exits:
          west:
            destination: flooded_corridor
          south:
            destination: maintenance_shaft
        triggers:
          - id: timer_tick_pump_room_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo The pump suddenly groans louder, its gears grinding ominously before settling back into its regular rhythm.
          - id: timer_tick_pump_room_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo A pipe near you suddenly bursts, releasing a spray of foul water before sputtering out.
          - id: catch_look_pump
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "pump"
            script: |
              echo As you examine the pump, you notice strange, archaic symbols carved into its base, barely visible beneath years of grime.
          - id: catch_any_sewer_touch
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "touch"
            script: |
              echo You reach out to touch the pump, feeling the vibrations of its constant motion. The metal is surprisingly warm.
          - id: catch_say_stop
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "stop"
            script: |
              echo For a brief moment, the pump's rhythm seems to falter, as if responding to your command, before resuming its relentless pumping.
        creatures:
          - id: rust_monster
            quantity: 2
            respawn_time_min: 45
            respawn_time_max: 120
          - id: steam_sprite
            quantity: 3
            respawn_time_min: 30
            respawn_time_max: 90
          - id: gear_golem
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180

      ancient_crypt:
        name: Forgotten Sewer Crypt
        description: >
          You descend into a grim, forgotten chamber that appears to be an ancient crypt, 
          bizarrely integrated into the sewer system. The walls are lined with recesses 
          containing moldering coffins and scattered bones. Elaborate, yet heavily eroded 
          stone sarcophagi occupy the center of the room, their lids slightly ajar. The air 
          is thick with the musty scent of decay and stagnant water. Patches of 
          phosphorescent fungi provide an eerie, pale blue illumination, casting long 
          shadows across the crypts. Trickles of sewage seep through cracks in the walls, 
          forming foul puddles on the uneven stone floor. Faded inscriptions and worn 
          bas-reliefs on the walls hint at the chamber's former grandeur and the identity 
          of those interred here. An oppressive silence hangs in the air, broken only by 
          the occasional drip of water and your own cautious footsteps.

          Exits: up, east
        exits:
          up:
            destination: crumbling_passage
          east:
            destination: bone_pile
        triggers:
          - id: timer_tick_ancient_crypt_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo A cold breeze whispers through the crypt, carrying with it the faint sound of mournful whispers.
          - id: timer_tick_ancient_crypt_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo The lid of a nearby sarcophagus shifts slightly with a grating sound, then falls still.
          - id: catch_look_inscription
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "inscription"
            script: |
              echo As you study the faded inscription, you make out words like "guardian", "eternal vigil", and "seal", sending a chill down your spine.
          - id: catch_any_open
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "open"
            script: |
              echo The very thought of opening one of these ancient coffins fills you with dread. Some things are better left undisturbed.
          - id: catch_say_rest
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "rest"
            script: |
              echo As you speak of rest, the atmosphere in the crypt seems to grow heavier, as if the long-dead occupants are listening.
        creatures:
          - id: skeletal_warrior
            quantity: 2
            respawn_time_min: 60
            respawn_time_max: 180
          - id: ghost
            quantity: 1
            respawn_time_min: 90
            respawn_time_max: 240
          - id: tomb_rat
            quantity: 3
            respawn_time_min: 30
            respawn_time_max: 90

      maintenance_shaft:
        name: Vertical Maintenance Shaft
        description: >
          You find yourself in a towering vertical shaft that seems to stretch endlessly 
          upward and downward. This massive cylinder, clearly designed for maintenance 
          access, is a dizzying maze of rickety wooden platforms, rusted iron ladders, 
          and precariously hanging ropes. The walls are slick with moisture and studded 
          with protruding pipes of various sizes, some leaking and others emitting bursts 
          of steam. Dim, flickering lanterns are sporadically placed along the shaft, 
          barely illuminating the yawning darkness above and below. The air is thick with 
          humidity and the echoes of dripping water. Occasionally, unseen mechanisms creak 
          and groan, sending vibrations through the entire structure. The shaft seems to 
          serve as a central artery for the sewer system, with narrow tunnels branching 
          off at various levels.

          Exits: north, down
        exits:
          north:
            destination: pump_room
          down:
            destination: lower_tunnels
        triggers:
          - id: timer_tick_maintenance_shaft_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 18
            script: |
              echo A sudden gust of wind howls through the shaft, causing the wooden platforms to creak ominously.
          - id: timer_tick_maintenance_shaft_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo Something large and unseen scurries across a platform far above, sending a shower of rust and debris raining down.
          - id: catch_look_ladder
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "ladder"
            script: |
              echo The iron ladder looks dangerously corroded. You wonder if it could support your weight.
          - id: catch_any_jump
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "jump"
            script: |
              echo The thought of jumping in this shaft is terrifying. The bottom, if there is one, is lost in darkness.
          - id: catch_say_hello
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "hello"
            script: |
              echo Your greeting echoes up and down the shaft, repeating and distorting until it fades into an eerie whisper.
        creatures:
          - id: pipe_crawler
            quantity: 2
            respawn_time_min: 40
            respawn_time_max: 100
          - id: rust_bat
            quantity: 3
            respawn_time_min: 30
            respawn_time_max: 90
          - id: shadow_lurker
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180

      bone_pile:
        name: Mysterious Bone Pile
        description: >
          You enter a chamber that sends a chill down your spine. The room is dominated by an 
          enormous, haphazard pile of bones that reaches nearly to the ceiling. Skulls, 
          ribcages, and limb bones of various sizes and species are jumbled together in a 
          macabre monument. The pile seems to shift and settle occasionally, as if alive. 
          Dim, sickly light filters through gaps in the bone structure, casting eerie 
          shadows across the damp stone walls. The air is thick with the musty odor of 
          ancient decay and the metallic tinge of old blood. Scraps of rotted clothing and 
          rusted weapons are visible among the osseous debris. The floor around the pile is 
          slick with a film of unidentifiable slime. An oppressive silence hangs in the air, 
          broken only by the occasional clatter of shifting bones and your own nervous breathing.

          Exits: west, south
        exits:
          west:
            destination: ancient_crypt
          south:
            destination: smugglers_den
        triggers:
          - id: timer_tick_bone_pile_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo The bone pile shifts suddenly, sending a small avalanche of skulls clattering to the floor.
          - id: timer_tick_bone_pile_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 25
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo A cold, unnatural wind sweeps through the chamber, carrying with it the faint sound of agonized whispers.
          - id: catch_look_skull
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "skull"
            script: |
              echo As you examine one of the skulls, its eye sockets seem to glow briefly with a malevolent red light.
          - id: catch_any_take
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "take"
            script: |
              echo As you reach out to take a bone, the entire pile trembles ominously. Perhaps it's best not to disturb it.
          - id: catch_say_who
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "who"
            script: |
              echo Your question echoes in the chamber. For a moment, the bone pile seems to vibrate in response, as if trying to answer.
        creatures:
          - id: bone_construct
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180
          - id: marrow_leech
            quantity: 3
            respawn_time_min: 30
            respawn_time_max: 90
          - id: necromancer_shade
            quantity: 1
            respawn_time_min: 90
            respawn_time_max: 240

      lower_tunnels:
        name: Lower Sewer Tunnels
        description: >
          You find yourself in a maze-like network of narrow, winding tunnels that form the 
          lowest level of the sewer system. The ceiling here is oppressively low, forcing 
          taller individuals to stoop. The walls are slick with a foul-smelling slime, and 
          the floor is covered in a shallow layer of murky, stagnant water that sloshes 
          around your feet with every step. Thick roots from trees far above have broken 
          through in places, creating natural, if precarious, handholds. The air is dense 
          with humidity and the pungent odor of decay. Bioluminescent fungi provide sparse, 
          eerie illumination, casting shifting shadows that play tricks on your eyes. The 
          constant drip of water and the distant echo of rushing streams create a 
          disorienting backdrop of sound. Debris from the upper levels collects here, 
          forming small islands of refuse throughout the tunnels.

          Exits: up, east, west
        exits:
          up:
            destination: maintenance_shaft
          east:
            destination: slime_pools
          west:
            destination: echoing_chamber
        triggers:
          - id: timer_tick_lower_tunnels_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo A sudden surge of water rushes through the tunnel, momentarily rising to your knees before receding.
          - id: timer_tick_lower_tunnels_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo You hear a series of splashes in the darkness ahead, as if something large is moving through the water towards you.
          - id: catch_look_root
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "root"
            script: |
              echo As you examine the root, you notice it seems to twitch and move slightly, as if alive and aware of your presence.
          - id: catch_any_sewer_drink
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "drink"
            script: |
              echo The mere thought of drinking this foul water makes your stomach churn. It would surely lead to a nasty illness, if not worse.
          - id: catch_say_lost
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "lost"
            script: |
              echo Your voice echoes through the tunnels. For a moment, you hear what sounds like a mocking laugh in response, but it's gone as quickly as it came.
        creatures:
          - id: sewer_troll
            quantity: 1
            respawn_time_min: 90
            respawn_time_max: 240
          - id: giant_leech
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: tunnel_serpent
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180

      smugglers_den:
        name: Abandoned Smugglers' Den
        description: >
          You enter a spacious cavern that bears clear signs of recent human habitation. 
          This hidden chamber was once a bustling smugglers' hideout, now abandoned in haste. 
          Rickety wooden platforms and makeshift piers extend over a dark, slow-moving 
          underground river. Rotting crates and barrels are stacked haphazardly, some 
          spilling their mysterious contents onto the damp stone floor. Rusty hooks and 
          frayed ropes hang from the low ceiling, once used for moving contraband. Moldy 
          straw is scattered about, remnants of bedding and packing material. The walls 
          are marked with crude symbols and tally marks, a secret language of the criminal 
          underworld. A few sputtering torches cast flickering shadows, revealing glimpses 
          of vermin scurrying in the corners. The air is thick with the musty smell of 
          damp wood, mold, and the lingering scent of illicit goods.

          Exits: north, down
        exits:
          north:
            destination: bone_pile
          down:
            destination: secret_passage
        triggers:
          - id: timer_tick_smugglers_den_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo A section of the wooden platform creaks and groans, threatening to give way under its own weight.
          - id: timer_tick_smugglers_den_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo You hear the sound of a barrel toppling over in the darkness, followed by the scurrying of many tiny feet.
          - id: catch_look_crate
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "crate"
            script: |
              echo As you peer into an open crate, you see the glint of glass vials filled with an unknown, swirling liquid.
          - id: catch_any_search
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "search"
            script: |
              echo Your search reveals little of value. It seems the smugglers took their most precious goods when they fled.
          - id: catch_say_password
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "password"
            script: |
              echo As you speak the word 'password', you hear a faint click from somewhere in the room, as if a hidden mechanism has been activated.
        creatures:
          - id: giant_rat
            quantity: 3
            respawn_time_min: 20
            respawn_time_max: 60
          - id: smuggler_ghost
            quantity: 1
            respawn_time_min: 90
            respawn_time_max: 240
          - id: shadow_thief
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180

      slime_pools:
        name: Glowing Slime Pools
        description: >
          You enter a vast, cavern-like chamber dominated by a series of bubbling pools 
          filled with viscous, luminescent slime. The pools cast an eerie, pulsating light 
          in various hues of green, blue, and purple, creating a surreal, alien landscape. 
          The air is thick with an acrid, chemical smell that burns your nostrils and makes 
          your eyes water. Tendrils of mist rise from the surface of the pools, twisting 
          into bizarre shapes before dissipating. The stone floor is slick and treacherous, 
          coated with a thin film of the glowing substance. Stalactites drip a glowing 
          ooze from the ceiling, forming new, small pools where they land. The walls are 
          etched with strange, swirling patterns that seem to move in the corner of your 
          eye. A constant, low gurgling sound fills the air, punctuated by occasional 
          plops and squelches from the pools.

          Exits: west, south
        exits:
          west:
            destination: lower_tunnels
          south:
            destination: alchemical_dumping_ground
        triggers:
          - id: timer_tick_slime_pools_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo A large bubble swells on the surface of one of the pools before bursting with a loud 'plop', releasing a cloud of glowing mist.
          - id: timer_tick_slime_pools_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 25
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo The colors of the pools suddenly shift, swirling into new patterns and hues before settling again.
          - id: catch_look_slime
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "slime"
            script: |
              echo As you examine the slime closely, you see tiny, squirming organisms moving within it. The longer you look, the more you feel drawn to the hypnotic movements.
          - id: catch_any_sewer_touch
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "touch"
            script: |
              echo You resist the urge to touch the glowing slime. Its unnatural light and movement suggest it could be extremely dangerous.
          - id: catch_say_magic
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "magic"
            script: |
              echo As you speak the word 'magic', the pools pulse brightly in response, their light momentarily intensifying.
        creatures:
          - id: slime_elemental
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180
          - id: mutant_newt
            quantity: 3
            respawn_time_min: 30
            respawn_time_max: 90
          - id: ooze_horror
            quantity: 1
            respawn_time_min: 90
            respawn_time_max: 240

      echoing_chamber:
        name: Echoing Chamber
        description: >
          You enter an enormous, dome-shaped cavern that seems to capture and amplify every 
          sound. The chamber is largely empty, save for a few stone pillars that rise from 
          floor to ceiling, their surfaces worn smooth by time and moisture. The walls are 
          covered in a lattice of tiny cracks and fissures, creating complex patterns that 
          seem to shift in the dim light. A thin layer of water covers the floor, reflecting 
          the sparse illumination and creating a mirror-like effect that makes the chamber 
          appear twice its actual size. Droplets of water fall from the ceiling at irregular 
          intervals, each creating a cascade of echoes that reverberate throughout the space. 
          The air is cool and damp, carrying a slight mineral scent. Every footstep, every 
          breath, is magnified and distorted, creating an unsettling audio landscape.

          Exits: east, north
        exits:
          east:
            destination: lower_tunnels
          north:
            destination: bat_roost
        triggers:
          - id: timer_tick_echoing_chamber_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo A distant rumble, perhaps from far above in the city, is caught and amplified by the chamber, transforming into an ominous, thunderous sound.
          - id: timer_tick_echoing_chamber_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo You hear what sounds like whispered voices coming from all directions, but the words are indistinct and fade quickly.
          - id: catch_look_pillar
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "pillar"
            script: |
              echo As you examine the pillar, you notice faint inscriptions near its base. They appear to be musical notes, barely visible after years of erosion.
          - id: catch_any_sing
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "sing"
            script: |
              echo Your singing is caught by the chamber's acoustics, amplified and distorted into an otherworldly chorus that seems to come from everywhere at once.
          - id: catch_say_sewer_echo
            type: catch_say
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "echo"
            script: |
              $if($random(1,2),eq,1) {
                echo Your word echoes through the chamber, repeating and distorting until it becomes unrecognizable.
              } else {
                echo The chamber seems to latch onto your word, repeating it with increasing volume until it's almost deafening, then suddenly falling silent.
              }
        creatures:
          - id: echo_bat
            quantity: 3
            respawn_time_min: 30
            respawn_time_max: 90
          - id: sound_elemental
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180
          - id: whispering_shade
            quantity: 2
            respawn_time_min: 45
            respawn_time_max: 120

      secret_passage:
        name: Secret Underground Passage
        description: >
          You find yourself in a narrow, winding tunnel that bears the hallmarks of 
          intentional construction rather than natural formation. The walls are smooth 
          stone, fitted tightly together with barely visible seams. The ceiling is low, 
          forcing taller individuals to stoop. Faint, magical glowstones are set at 
          irregular intervals, providing just enough light to navigate by. The air is 
          surprisingly fresh, suggesting some form of magical or mechanical ventilation. 
          The floor is worn smooth from years of secretive traffic, with occasional 
          scuff marks hinting at recent use. Every so often, you pass small alcoves 
          that might serve as hiding spots or rest areas. The tunnel seems to slope 
          gently upward, perhaps leading towards the city above. An atmosphere of 
          secrecy and intrigue permeates the passage.

          Exits: up, east
        exits:
          up:
            destination: smugglers_den
          east:
            destination: forgotten_treasury
        triggers:
          - id: timer_tick_secret_passage_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo You hear the faint echo of footsteps from somewhere in the passage, but they quickly fade away.
          - id: timer_tick_secret_passage_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo A sudden draft extinguishes one of the glowstones momentarily, plunging a section of the passage into darkness before it reignites.
          - id: catch_look_alcove
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "alcove"
            script: |
              echo As you examine the alcove, you notice faint markings on the wall - perhaps a code or message left for other passage users.
          - id: catch_any_knock
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "knock"
            script: |
              echo Your knock produces a series of echoes that seem to travel far down the passage. For a moment, you think you hear a responding knock, but then silence returns.
          - id: catch_say_open
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "open"
            script: |
              echo As you speak the word 'open', you hear a faint click from somewhere in the walls, as if a hidden mechanism has been activated.
        creatures:
          - id: shadow_scout
            quantity: 2
            respawn_time_min: 45
            respawn_time_max: 120
          - id: whisper_sprite
            quantity: 3
            respawn_time_min: 30
            respawn_time_max: 90
          - id: illusory_guardian
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180

      alchemical_dumping_ground:
        name: Alchemical Waste Dumping Ground
        description: >
          You enter a large, circular chamber that reeks of noxious chemicals and magical 
          residue. The room is a chaotic mess of broken glass, twisted metal, and pools of 
          bubbling, multi-colored liquids. Massive iron pipes protrude from the ceiling and 
          walls, constantly dripping a variety of alchemical waste into the chamber. The 
          floor is a patchwork of different materials - some areas are corroded metal, others 
          are warped stone, and a few spots seem to be transmuted into entirely foreign 
          substances. Eerie, unnatural light pulses from some of the larger waste pools, 
          casting shifting shadows across the room. The air shimmers with barely visible 
          magical energies, and occasional sparks of wild magic crackle between pools. 
          Mutated fungi and crystalline growths sprout from the walls, feeding on the 
          magical pollution.

          Exits: north, west
        exits:
          north:
            destination: slime_pools
          west:
            destination: mutant_lair
        triggers:
          - id: timer_tick_alchemical_dumping_ground_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo A sudden geyser of multicolored liquid erupts from one of the pipes, splattering the area with glowing droplets.
          - id: timer_tick_alchemical_dumping_ground_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo A bolt of wild magic arcs between two pools, briefly illuminating the chamber in a flash of prismatic light.
          - id: catch_look_pool
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "pool"
            script: |
              echo As you examine the pool, you see swirling patterns forming and dissolving rapidly on its surface. The longer you look, the more you feel a strange tingling sensation.
          - id: catch_any_sewer_drink
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "drink"
            script: |
              echo The mere thought of drinking anything in this room fills you with dread. The magical contamination here could have horrific effects.
          - id: catch_say_transmute
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "transmute"
            script: |
              echo As you speak the word 'transmute', a nearby puddle of liquid suddenly changes color and consistency, releasing a puff of iridescent smoke.
        creatures:
          - id: ooze_elemental
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180
          - id: mutant_rat
            quantity: 3
            respawn_time_min: 30
            respawn_time_max: 90
          - id: chaos_wisp
            quantity: 2
            respawn_time_min: 45
            respawn_time_max: 120

      bat_roost:
        name: Giant Sewer Bat Roost
        description: >
          You enter a vast, vertical chamber that stretches far above your head, disappearing 
          into darkness. The walls are pockmarked with countless ledges, crevices, and small 
          caves, creating a honeycomb-like structure. The air is thick with the pungent smell 
          of guano and the musty odor of bat fur. A constant, high-pitched chittering echoes 
          throughout the chamber, occasionally punctuated by the leathery flap of enormous 
          wings. Streams of water trickle down the walls, feeding small pools on the uneven 
          floor. Patches of phosphorescent fungi provide sparse, eerie illumination, their 
          soft glow revealing glimpses of massive, shadowy forms clinging to the walls or 
          swooping through the air. The floor is treacherously slippery, covered in a thick 
          layer of guano and the bones of the bats' unfortunate prey.

          Exits: south, down
        exits:
          south:
            destination: echoing_chamber
          down:
            destination: guano_pit
        triggers:
          - id: timer_tick_bat_roost_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo A massive shape detaches from the wall above, its wings creating a gust of wind as it swoops down into the darkness below.
          - id: timer_tick_bat_roost_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo The chittering suddenly intensifies, reaching a fever pitch before abruptly falling silent. The silence is almost more unnerving than the noise.
          - id: catch_look_bat
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "bat"
            script: |
              echo As you peer into the darkness, you see a pair of enormous, glowing eyes staring back at you. They blink once, then vanish.
          - id: catch_any_climb
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "climb"
            script: |
              echo The thought of climbing the slimy, guano-covered walls fills you with dread. It would be extremely dangerous, if not impossible.
          - id: catch_say_sewer_echo
            type: catch_say
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "echo"
            script: |
              echo Your word echoes through the chamber, causing a wave of agitation among the bats. The air fills with the sound of rustling wings and alarmed squeaks.
        creatures:
          - id: giant_sewer_bat
            quantity: 3
            respawn_time_min: 45
            respawn_time_max: 120
          - id: bat_swarm
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90
          - id: guano_beetle
            quantity: 4
            respawn_time_min: 20
            respawn_time_max: 60

      forgotten_treasury:
        name: Forgotten Imperial Treasury Vault
        description: >
          You step into a grand chamber that stands in stark contrast to the rest of the 
          sewer system. This forgotten vault, once part of the Imperial Treasury, speaks 
          of ancient wealth and power. The walls are lined with ornate shelves and niches, 
          many still holding tarnished goblets, corroded coins, and gem-encrusted items 
          dulled by time. Massive iron chests, some partially open and spilling their 
          contents, are scattered about the room. The ceiling arches high above, supported 
          by columns adorned with faded gold leaf. A thick layer of dust covers everything, 
          and cobwebs stretch between artifacts. The air is stale and dry, preserving the 
          remnants of lost riches. Faint magical glows emanate from some objects, hinting 
          at enchantments that have outlasted their creators. Despite the obvious looting 
          that has occurred, the sheer volume of wealth left behind is staggering.

          Exits: west, south
        exits:
          west:
            destination: secret_passage
          south:
            destination: trapped_corridor
        triggers:
          - id: timer_tick_forgotten_treasury_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo A shimmer of magic ripples across the room, causing some of the artifacts to glow briefly before fading back to dormancy.
          - id: timer_tick_forgotten_treasury_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo You hear the faint sound of coins shifting, as if an unseen hand is sifting through one of the treasure piles.
          - id: catch_look_chest
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "chest"
            script: |
              echo As you examine the chest, you notice intricate locking mechanisms and what appear to be magical wards etched into its surface.
          - id: catch_any_take
            type: catch_any
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "take"
            script: |
              echo As you reach for an item, you feel a tingling sensation in your hand. A faint voice seems to whisper, "Are you worthy?"
          - id: catch_say_gold
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "gold"
            script: |
              echo At the mention of gold, you hear a faint, spectral chuckle echoing through the chamber.
        creatures:
          - id: treasure_guardian
            quantity: 1
            respawn_time_min: 90
            respawn_time_max: 240
          - id: gold_mite
            quantity: 3
            respawn_time_min: 30
            respawn_time_max: 90
          - id: ghostly_accountant
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 180

      mutant_lair:
        name: Sewer Mutant Lair
        description: >
          You enter a nightmarish chamber that seems to pulsate with unnatural life. This 
          vast cavern has been twisted by years of exposure to alchemical waste and wild 
          magic. The walls are covered in a thick, mucus-like substance that glows with a 
          sickly green light. Bizarre, fleshy growths protrude from the floor and ceiling, 
          some twitching as if alive. Pools of bubbling, mutagenic sludge dot the area, 
          emitting noxious fumes that swirl in the air. Half-formed creatures can be seen 
          floating in some of these pools. The air is thick with the stench of decay and 
          chemicals, making it difficult to breathe. Eerie, guttural sounds echo throughout 
          the chamber, hinting at the presence of its mutated inhabitants. Piles of gnawed 
          bones and discarded refuse suggest the eating habits of the lair's occupants.
          A dark opening in the southern wall leads to somewhere deeper beneath the city.

          Exits: east, south
        exits:
          east:
            destination: alchemical_dumping_ground
          south:
            destination: rough_hewn_tunnel_entrance
        triggers:
          - id: timer_tick_mutant_lair_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo A nearby fleshy growth suddenly convulses and splits open, releasing a cloud of glowing spores into the air.
          - id: timer_tick_mutant_lair_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 25
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo You hear a series of splashes followed by a chorus of inhuman screeches, as if something has emerged from one of the mutagenic pools.
          - id: catch_look_pool
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "pool"
            script: |
              echo As you peer into the mutagenic pool, you see a half-formed creature staring back at you with too many eyes. It reaches out with a misshapen limb before sinking back into the sludge.
          - id: catch_any_sewer_touch
            type: catch_any
            criteria:
            - subject: "%{*}"
              operator: contains
              predicate: "touch"
            script: |
              echo The urge to touch anything in this horrific place is quickly overwhelmed by your sense of self-preservation. Who knows what transformations might occur from mere contact?
          - id: catch_say_human
            type: catch_say
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "human"
            script: |
              echo At the word 'human', you hear a cacophony of angry growls and screeches from the shadows. The mutants seem to react violently to reminders of their former selves.
        creatures:
          - id: sewer_mutant
            quantity: 3
            respawn_time_min: 45
            respawn_time_max: 120
          - id: mutant_abomination
            quantity: 1
            respawn_time_min: 90
            respawn_time_max: 240
          - id: parasitic_slime
            quantity: 2
            respawn_time_min: 30
            respawn_time_max: 90

      rough_hewn_tunnel_entrance:
        name: Rough-Hewn Tunnel Entrance
        description: >
          The sewer walls give way here to raw, unworked stone. A crude tunnel has been 
          carved into the bedrock, its walls bearing the unmistakable marks of pickaxes 
          and chisels. The workmanship is hasty but effectivethis passage was clearly 
          excavated in secret, away from prying eyes. The floor slopes gradually downward, 
          and the air grows noticeably drier as you leave the fetid moisture of the sewers 
          behind. Faded chalk markings on the walls might once have served as navigation 
          aids for those who dug this forbidden path. The tunnel stretches south into 
          impenetrable darkness.

          Exits: north, south
        exits:
          north:
            destination: mutant_lair
          south:
            destination: rough_hewn_tunnel_descent
        triggers:
          - id: timer_tick_tunnel_entrance_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo The distant drip of water echoes from somewhere deep within the tunnel.
          - id: timer_tick_tunnel_entrance_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 35
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo A cold draft wafts up from the depths, carrying an unfamiliar, briny scent.
          - id: catch_look_markings
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "marking"
            script: |
              echo The chalk markings are faded and crypticarrows, numbers, and symbols that might have meant something to the original diggers.
          - id: catch_look_chisel
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "chisel"
            script: |
              echo The chisel marks suggest this tunnel was carved over many months, perhaps years, by determined hands.
        creatures:
          - id: cave_spider
            quantity: 2
            respawn_time_min: 40
            respawn_time_max: 100
          - id: tunnel_serpent
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 150

      rough_hewn_tunnel_descent:
        name: Descending Tunnel
        description: >
          The rough-hewn tunnel plunges deeper into the earth at a steep angle. Crude 
          steps have been hacked into the stone floor to prevent slipping, their edges 
          worn smooth by the passage of many feet over countless years. The walls here 
          are scored with deeper gouges, as if the diggers encountered harder rock and 
          had to work with greater force. Patches of phosphorescent lichen cling to the 
          ceiling, providing just enough ghostly illumination to see by. The temperature 
          continues to drop, and the briny scent grows stronger. You sense you are 
          approaching something ancient and vast.

          Exits: north, south
        exits:
          north:
            destination: rough_hewn_tunnel_entrance
          south:
            destination: rough_hewn_tunnel_deep
        triggers:
          - id: timer_tick_descent_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 18
            script: |
              echo Loose pebbles skitter down the steep passage, their echoes fading into the depths.
          - id: timer_tick_descent_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo The phosphorescent lichen pulses briefly, as if responding to some unseen stimulus.
          - id: catch_look_lichen
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "lichen"
            script: |
              echo The lichen glows with a soft, bluish light unlike anything found in the sewers above. It seems almost... cultivated.
          - id: catch_look_steps
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "step"
            script: |
              echo The worn steps tell a story of frequent use. Whatever lies below was visited often.
        creatures:
          - id: cave_spider
            quantity: 1
            respawn_time_min: 50
            respawn_time_max: 120
          - id: shadow_lurker
            quantity: 1
            respawn_time_min: 75
            respawn_time_max: 180

      rough_hewn_tunnel_deep:
        name: Deep Tunnel Junction
        description: >
          The tunnel levels out here in a small, roughly circular chamber. Tool marks 
          cover every surface, testament to the backbreaking labor required to carve 
          this space from solid rock. A rusted iron brazier sits cold and dead in the 
          centerevidence that the diggers once rested here during their secret work. 
          Discarded pick handles and broken tool heads litter the floor. The air is 
          heavy with an ancient, mineral smell, tinged with something else... the 
          unmistakable tang of salt water. The tunnel continues south, and you can 
          feel a faint vibration in the stone, as if vast machinery operates somewhere 
          in the distance.

          Exits: north, south
        exits:
          north:
            destination: rough_hewn_tunnel_descent
          south:
            destination: rough_hewn_tunnel_citadel_approach
        triggers:
          - id: timer_tick_deep_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 20
            script: |
              echo A deep, rhythmic vibration pulses through the stone beneath your feet.
          - id: timer_tick_deep_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 35
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 25
            script: |
              echo You hear what might be distant machineryor perhaps the groaning of immense pressure against ancient stone.
          - id: catch_look_brazier
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "brazier"
            script: |
              echo The brazier is encrusted with centuries of rust. Charred remnants of wood suggest it hasn't been lit in ages.
          - id: catch_look_tools
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "tool"
            script: |
              echo The broken tools are of ancient make, their metal corroded beyond use. Whoever dug this tunnel did so long, long ago.
        creatures:
          - id: stone_mite
            quantity: 3
            respawn_time_min: 35
            respawn_time_max: 90
          - id: tunnel_serpent
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 150

      rough_hewn_tunnel_citadel_approach:
        name: Tunnel's End - Ancient Foundation
        description: >
          The rough-hewn tunnel terminates here against a wall of worked stone utterly 
          unlike the crude excavation behind you. This is ancient masonry of exceptional 
          qualitymassive basalt blocks fitted together with mathematical precision, 
          their surfaces etched with faded geometric patterns. A ragged breach has been 
          carved through this wall, the crude chisel marks a stark violation of the 
          elegant construction. Beyond the breach, you glimpse chambers of polished 
          stone and brass fittings. The air here carries a strange, electric quality, 
          and you can feel pressure against your ears as if you've descended to a 
          great depth. The rhythmic pulse of hidden machinery is stronger here, 
          accompanied by the distant hiss of steam.

          Exits: north, east
        exits:
          north:
            destination: rough_hewn_tunnel_deep
          east:
            destination: sunken_citadel.breach_chamber
        triggers:
          - id: timer_tick_approach_1
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria: 
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 15
            script: |
              echo The pulse of distant machinery reverberates through the ancient masonry, a heartbeat of brass and steam.
          - id: timer_tick_approach_2
            type: timer_tick
            flags:
              - only_when_pc_room
            criteria:
              - subject: "%time_elapsed%"
                operator: "numgte"
                predicate: 30
              - subject: "$random(1,100)"
                operator: "numlte"
                predicate: 30
            script: |
              echo A shimmer of azure light pulses through the breach from somewhere deep within the ancient structure beyond.
          - id: catch_look_breach
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "breach"
            script: |
              echo The breach was made with desperate forcewhoever broke through this wall needed access badly enough to deface this magnificent construction.
          - id: catch_look_patterns
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "pattern"
            script: |
              echo The geometric patterns seem to flow like water frozen in stone. They remind you of tide charts and mathematical calculations.
          - id: catch_look_masonry
            type: catch_look
            criteria: 
              - subject: "%{*}"
                operator: contains
                predicate: "masonry"
            script: |
              echo This is no ordinary construction. The precision and scale suggest a civilization of immense capabilityone that may have sunk beneath the earth long ago.
        creatures:
          - id: shadow_lurker
            quantity: 1
            respawn_time_min: 60
            respawn_time_max: 150
          - id: rust_bat
            quantity: 2
            respawn_time_min: 40
            respawn_time_max: 100
